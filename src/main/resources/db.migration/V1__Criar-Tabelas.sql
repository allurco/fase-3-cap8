CREATE TABLE TB_FONTES (
                        ID_FONTES INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                        NOME VARCHAR2(255) NOT NULL,
                        TIPO VARCHAR2(50),
                        LOCALIZACAO VARCHAR2(200),
                        ID_RESPONSAVEL INTEGER,
                        CRIADO_EM TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE TB_EMISSOES (
                          ID_EMISSOES INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                          ID_FONTES_FK INTEGER NOT NULL,
                          QUANTIDADE_KG_CO2E NUMBER(12,2) NOT NULL,
                          CATEGORIA VARCHAR2(50),
                          DATA_HORA TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                          METADADOS CLOB,
                          CONSTRAINT FK_EMISSOES_FONTES FOREIGN KEY (ID_FONTES_FK) REFERENCES FONTES(ID_FONTES)
);

CREATE TABLE TB_PROJETOS (
                          ID_PROJETOS INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                          NOME VARCHAR2(255) NOT NULL,
                          TIPO VARCHAR2(50),
                          CAPACIDADE_KG_CO2E NUMBER(14,2),
                          ANO_REFERENCIA INTEGER,
                          LOCALIZACAO VARCHAR2(200),
                          STATUS VARCHAR2(20)
);

CREATE TABLE TB_COMPENSACOES (
                              ID_COMPENSACOES INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                              ID_EMISSOES_FK INTEGER NOT NULL,
                              ID_PROJETOS_FK INTEGER NOT NULL,
                              QUANTIDADE_KG_CO2E NUMBER(12,2) NOT NULL,
                              DATA_HORA TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
                              CONSTRAINT FK_COMPENSACOES_EMISSAO FOREIGN KEY (ID_EMISSOES_FK) REFERENCES EMISSOES(ID_EMISSOES),
                              CONSTRAINT FK_COMPENSACOES_PROJETO FOREIGN KEY (ID_PROJETOS_FK) REFERENCES PROJETOS(ID_PROJETOS)
);

CREATE TABLE TB_ALERTAS (
                         ID_ALERTAS INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
                         TIPO VARCHAR2(50),
                         ID_RELACIONADO INTEGER,
                         MENSAGEM VARCHAR2(300),
                         RESOLVIDO CHAR(1) DEFAULT 'N' CHECK (RESOLVIDO IN ('Y','N')),
                         CRIADO_EM TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IDX_EMISSOES_FONTE ON EMISSOES(ID_FONTES_FK);
CREATE INDEX IDX_COMPENSACOES_EMISSAO ON COMPENSACOES(ID_EMISSOES_FK);
CREATE INDEX IDX_COMPENSACOES_PROJETO ON COMPENSACOES(ID_PROJETOS_FK);